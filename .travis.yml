language: clang

compiler: gcc

cache:
  directories:
    - $HOME/SDK_481

before_install: git clone https://github.com/pocketbook-free/SDK_481.git

install: make.sh

before_script:
    - touch empty-theme.cfg

script:
    - ./pbtheme -h
    
    - ./pbtheme test-env/Line.pbt theme.cfg
    - test "`stat -c %s theme.cfg`" = 227394

    - ./pbtheme -p test-env/Line.pbt theme.cfg
    - test "`stat -c %s test-env/Line.pbt`" = 520290

    - ./pbtheme -u test-env/Line.pbt > new-theme.cfg
    - diff new-theme.cfg theme.cfg
    
    - ./pbtheme -p test-env/Line.pbt empty-theme.cfg
    - test "`stat -c %s test-env/Line.pbt`" = 494527
